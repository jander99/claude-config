{# 
Agent Template - Generates complete Claude Code agent markdown files
from unified agent configuration and traits.
#}
---
name: {{ agent.name }}
description: {{ agent.description }}{% if traits %} with {{ traits|length }} specialized trait{{ 's' if traits|length != 1 else '' }}{% endif %}

model: {{ agent.model }}
---

{{ agent.description }}. Use PROACTIVELY when working with projects detected by file patterns and project indicators. Coordinates with other agents for validation and specialized tasks. MUST check branch status before development work.

{% if agent.context_priming %}
## Context Priming

{{ agent.context_priming }}
{% endif %}

## Core Responsibilities
{% for responsibility in agent.responsibilities %}
- {{ responsibility }}
{% endfor %}

## Expertise Areas
{% for expertise_area in agent.expertise %}
- {{ expertise_area }}
{% endfor %}

{% if agent.proactive_triggers %}
## Proactive Activation
This agent automatically activates when detecting:

{% if agent.proactive_triggers.file_patterns %}
**File Patterns:**
{% for pattern in agent.proactive_triggers.file_patterns %}
- `{{ pattern }}`
{% endfor %}
{% endif %}

{% if agent.proactive_triggers.project_indicators %}
**Project Indicators:**
{% for indicator in agent.proactive_triggers.project_indicators %}
- {{ indicator }}
{% endfor %}
{% endif %}
{% endif %}


{% if agent.quality_criteria %}
## Quality Criteria

{% for category, criteria in agent.quality_criteria.items() %}
### {{ category.replace('_', ' ')|title }}

{% if criteria is mapping %}
{% for criterion, description in criteria.items() %}
- **{{ criterion.replace('_', ' ')|title }}**: {{ description }}
{% endfor %}
{% else %}
{% for criterion in criteria %}
- {{ criterion }}
{% endfor %}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.decision_frameworks %}
## Decision Frameworks

{% for framework_name, framework in agent.decision_frameworks.items() %}
### {{ framework_name.replace('_', ' ')|title }}

{% if framework is mapping %}
{% for category, options in framework.items() %}
**{{ category.replace('_', ' ')|title }}:**
{% if options is mapping %}
{% for option, description in options.items() %}
- {{ option }}: {{ description }}
{% endfor %}
{% elif options is sequence and options is not string %}
{% for option in options %}
{% if option is mapping %}
{% for key, value in option.items() %}
- {{ key }}: {{ value }}
{% endfor %}
{% else %}
- {{ option }}
{% endif %}
{% endfor %}
{% else %}
- {{ options }}
{% endif %}

{% endfor %}
{% else %}
{{ framework }}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.boundaries %}
## Boundaries

{% for boundary_type, boundary_info in agent.boundaries.items() %}
### {{ boundary_type.replace('_', ' ')|title }}

{% if boundary_info is sequence and boundary_info is not string %}
{% for item in boundary_info %}
- {{ item }}
{% endfor %}
{% else %}
{{ boundary_info }}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.common_failures %}
## Common Failures

{% for failure_category, failures in agent.common_failures.items() %}
### {{ failure_category.replace('_', ' ')|title }}

{% if failures is mapping %}
{% for failure, description in failures.items() %}
- **{{ failure.replace('_', ' ')|title }}**: {{ description }}
{% endfor %}
{% else %}
{% for failure in failures %}
- {{ failure }}
{% endfor %}
{% endif %}

{% endfor %}
{% endif %}

{% for trait in traits %}
---

## {{ trait.name|title|replace('_', ' ') }} ({{ trait.category|title }})

{{ trait.description }}

{{ trait.implementation }}

{% if trait.coordination_patterns %}
### Coordination Patterns

{% for pattern in trait.coordination_patterns %}
**{{ pattern.name|replace('_', ' ')|title }}**
- Trigger: {{ pattern.trigger }}
- Action: {{ pattern.action }}
{% if pattern.context_required %}
- Required Context: {{ pattern.context_required|join(', ') }}
{% endif %}

{% endfor %}
{% endif %}

{% endfor %}

{% if agent.custom_instructions %}
---

## Custom Instructions

{{ agent.custom_instructions }}
{% endif %}

{% if agent.coordination_overrides %}
---

## Coordination Overrides

{% for override_name, override_value in agent.coordination_overrides.items() %}
**{{ override_name|replace('_', ' ')|title }}**: {{ override_value }}

{% endfor %}
{% endif %}

---

*Generated by Claude Config Generator v{{ version or '0.1.0' }}*
{# 
Agent Template - Generates complete Claude Code agent markdown files
from unified agent configuration and traits.
#}
---
name: {{ agent.name }}
description: {{ agent.description }}{% if traits %} with {{ traits|length }} specialized trait{{ 's' if traits|length != 1 else '' }}{% endif %}

model: {{ agent.model }}
---

{{ agent.description }}. Use PROACTIVELY when working with projects detected by file patterns and project indicators. Coordinates with other agents for validation and specialized tasks. MUST check branch status before development work.

{% if agent.context_priming %}
## Context Priming

{{ agent.context_priming }}
{% endif %}

## Core Responsibilities
{% for responsibility in agent.responsibilities %}
- {{ responsibility }}
{% endfor %}

## Expertise Areas
{% for expertise_area in agent.expertise %}
- {{ expertise_area }}
{% endfor %}

{% if agent.proactive_triggers %}
## Proactive Activation
This agent automatically activates when detecting:

{% if agent.proactive_triggers.file_patterns %}
**File Patterns:**
{% for pattern in agent.proactive_triggers.file_patterns %}
- `{{ pattern }}`
{% endfor %}
{% endif %}

{% if agent.proactive_triggers.project_indicators %}
**Project Indicators:**
{% for indicator in agent.proactive_triggers.project_indicators %}
- {{ indicator }}
{% endfor %}
{% endif %}
{% endif %}


{% if agent.quality_criteria %}
## Quality Criteria

{% for category, criteria in agent.quality_criteria.items() %}
### {{ category.replace('_', ' ')|title }}

{% if criteria is mapping %}
{% for criterion, description in criteria.items() %}
- **{{ criterion.replace('_', ' ')|title }}**: {{ description }}
{% endfor %}
{% else %}
{% for criterion in criteria %}
- {{ criterion }}
{% endfor %}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.decision_frameworks %}
## Decision Frameworks

{% for framework_name, framework in agent.decision_frameworks.items() %}
### {{ framework_name.replace('_', ' ')|title }}

{% if framework is mapping %}
{% for category, options in framework.items() %}
**{{ category.replace('_', ' ')|title }}:**
{% if options is mapping %}
{% for option, description in options.items() %}
- {{ option }}: {{ description }}
{% endfor %}
{% elif options is sequence and options is not string %}
{% for option in options %}
{% if option is mapping %}
{% for key, value in option.items() %}
- {{ key }}: {{ value }}
{% endfor %}
{% else %}
- {{ option }}
{% endif %}
{% endfor %}
{% else %}
- {{ options }}
{% endif %}

{% endfor %}
{% else %}
{{ framework }}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.boundaries %}
## Boundaries

{% for boundary_type, boundary_info in agent.boundaries.items() %}
### {{ boundary_type.replace('_', ' ')|title }}

{% if boundary_info is sequence and boundary_info is not string %}
{% for item in boundary_info %}
- {{ item }}
{% endfor %}
{% else %}
{{ boundary_info }}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.common_failures %}
## Common Failures

{% for failure_category, failures in agent.common_failures.items() %}
### {{ failure_category.replace('_', ' ')|title }}

{% if failures is mapping %}
{% for failure, description in failures.items() %}
- **{{ failure.replace('_', ' ')|title }}**: {{ description }}
{% endfor %}
{% else %}
{% for failure in failures %}
- {{ failure }}
{% endfor %}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.technology_stack %}
## Technology Stack

{% if agent.technology_stack.primary_frameworks %}
### Primary Frameworks
{% for framework in agent.technology_stack.primary_frameworks %}
**{{ framework.name }}**{% if framework.version %} `{{ framework.version }}`{% endif %}
{% if framework.use_cases %}
- **Use Cases**: {{ framework.use_cases|join(', ') }}
{% endif %}
{% if framework.alternatives %}
- **Alternatives**: {{ framework.alternatives|join(', ') }}
{% endif %}
{% if framework.configuration %}
- **Configuration**:
```{{ framework.config_language or 'yaml' }}
{{ framework.configuration }}
```
{% endif %}

{% endfor %}
{% endif %}

{% if agent.technology_stack.essential_tools %}
### Essential Tools
{% for category, tools in agent.technology_stack.essential_tools.items() %}
**{{ category.replace('_', ' ')|title }}:**
{% for tool in tools %}
- {{ tool }}
{% endfor %}

{% endfor %}
{% endif %}
{% endif %}

{% if agent.implementation_patterns %}
## Implementation Patterns

{% for pattern in agent.implementation_patterns %}
### {{ pattern.pattern }}

{{ pattern.context }}

{% if pattern.code_example %}
```{{ pattern.language }}
{{ pattern.code_example }}
```
{% endif %}

{% if pattern.best_practices %}
**Best Practices:**
{% for practice in pattern.best_practices %}
- {{ practice }}
{% endfor %}
{% endif %}

{% if pattern.common_pitfalls %}
**Common Pitfalls:**
{% for pitfall in pattern.common_pitfalls %}
- {{ pitfall }}
{% endfor %}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.professional_standards %}
## Professional Standards

{% if agent.professional_standards.security_frameworks %}
### Security Frameworks
{% for framework in agent.professional_standards.security_frameworks %}
- {{ framework }}
{% endfor %}
{% endif %}

{% if agent.professional_standards.industry_practices %}
### Industry Practices
{% for practice in agent.professional_standards.industry_practices %}
- {{ practice }}
{% endfor %}
{% endif %}

{% if agent.professional_standards.compliance_requirements %}
### Compliance Requirements
{% for requirement in agent.professional_standards.compliance_requirements %}
- {{ requirement }}
{% endfor %}
{% endif %}
{% endif %}

{% if agent.integration_guidelines %}
## Integration Guidelines

{% if agent.integration_guidelines.api_integration %}
### API Integration
{% for guideline in agent.integration_guidelines.api_integration %}
- {{ guideline }}
{% endfor %}
{% endif %}

{% if agent.integration_guidelines.database_integration %}
### Database Integration
{% for guideline in agent.integration_guidelines.database_integration %}
- {{ guideline }}
{% endfor %}
{% endif %}

{% if agent.integration_guidelines.third_party_services %}
### Third-Party Services
{% for guideline in agent.integration_guidelines.third_party_services %}
- {{ guideline }}
{% endfor %}
{% endif %}
{% endif %}

{% if agent.performance_benchmarks %}
## Performance Benchmarks

{% if agent.performance_benchmarks.response_times %}
### Response Times
{% for benchmark in agent.performance_benchmarks.response_times %}
- {{ benchmark }}
{% endfor %}
{% endif %}

{% if agent.performance_benchmarks.throughput_targets %}
### Throughput Targets
{% for target in agent.performance_benchmarks.throughput_targets %}
- {{ target }}
{% endfor %}
{% endif %}

{% if agent.performance_benchmarks.resource_utilization %}
### Resource Utilization
{% for utilization in agent.performance_benchmarks.resource_utilization %}
- {{ utilization }}
{% endfor %}
{% endif %}
{% endif %}

{% if agent.troubleshooting_guides %}
## Troubleshooting Guides

{% for guide in agent.troubleshooting_guides %}
### {{ guide.issue }}

{% if guide.symptoms %}
**Symptoms:**
{% for symptom in guide.symptoms %}
- {{ symptom }}
{% endfor %}
{% endif %}

{% if guide.solutions %}
**Solutions:**
{% for solution in guide.solutions %}
- {{ solution }}
{% endfor %}
{% endif %}

{% if guide.prevention %}
**Prevention:**
{% for prevention in guide.prevention %}
- {{ prevention }}
{% endfor %}
{% endif %}

{% endfor %}
{% endif %}

{% if agent.tool_configurations %}
## Tool Configurations

{% for config in agent.tool_configurations %}
### {{ config.tool }}

{% if config.config_file %}
**Configuration File:** `{{ config.config_file }}`
{% endif %}

{% if config.recommended_settings %}
**Recommended Settings:**
```{{ config.format }}
{% for key, value in config.recommended_settings.items() %}
{{ key }} = {{ value }}
{% endfor %}
```
{% endif %}

{% if config.integration_notes %}
{{ config.integration_notes }}
{% endif %}

{% if config.setup_commands %}
**Setup Commands:**
```bash
{% for command in config.setup_commands %}
{{ command }}
{% endfor %}
```
{% endif %}

{% endfor %}
{% endif %}

{# Legacy trait support #}
{% for trait in traits %}
---

## {{ trait.name|title|replace('_', ' ') }} ({{ trait.category|title }})

{{ trait.description }}

{{ trait.implementation }}

{% if trait.coordination_patterns %}
### Coordination Patterns

{% for pattern in trait.coordination_patterns %}
**{{ pattern.name|replace('_', ' ')|title }}**
- Trigger: {{ pattern.trigger }}
- Action: {{ pattern.action }}
{% if pattern.context_required %}
- Required Context: {{ pattern.context_required|join(', ') }}
{% endif %}

{% endfor %}
{% endif %}

{% endfor %}

{# New trait import system #}
{% if has_imports and imported_traits %}
---

## Imported Traits

This agent uses the following trait imports for enhanced capabilities:

{% if imported_traits.coordination_traits %}
### Coordination Traits

{% for trait_name, trait_data in imported_traits.coordination_traits.items() %}
#### {{ trait_data.name|title|replace('-', ' ') }}

{{ trait_data.description }}

{{ trait_data.content }}

{% endfor %}
{% endif %}

{% if imported_traits.tool_traits %}
### Tool Stack Traits

{% for trait_name, trait_data in imported_traits.tool_traits.items() %}
#### {{ trait_data.name|title|replace('-', ' ') }}

{{ trait_data.description }}

{{ trait_data.content }}

{% endfor %}
{% endif %}

{% if imported_traits.safety_traits %}
### Safety Protocol Traits

{% for trait_name, trait_data in imported_traits.safety_traits.items() %}
#### {{ trait_data.name|title|replace('-', ' ') }}

{{ trait_data.description }}

{{ trait_data.content }}

{% endfor %}
{% endif %}

{% if imported_traits.enhancement_traits %}
### Enhancement Traits

{% for trait_name, trait_data in imported_traits.enhancement_traits.items() %}
#### {{ trait_data.name|title|replace('-', ' ') }}

{{ trait_data.description }}

{{ trait_data.content }}

{% endfor %}
{% endif %}

{% if imported_traits.custom_coordination %}
### Custom Coordination Overrides

{% for coord_name, coord_value in imported_traits.custom_coordination.items() %}
**{{ coord_name|replace('_', ' ')|title }}:**
{{ coord_value }}

{% endfor %}
{% endif %}

{% if imported_traits.custom_tools %}
### Custom Tools

{% for tool in imported_traits.custom_tools %}
#### {{ tool.tool }}

{% if tool.config_file %}
**Configuration File:** `{{ tool.config_file }}`
{% endif %}

{% if tool.recommended_settings %}
**Recommended Settings:**
{% for setting, value in tool.recommended_settings.items() %}
- {{ setting }}: {{ value }}
{% endfor %}
{% endif %}

{% endfor %}
{% endif %}

{% endif %}

{% if agent.custom_instructions %}
---

## Custom Instructions

{{ agent.custom_instructions }}
{% endif %}

{% if has_imports and imported_traits %}
---

## Imported Coordination and Compliance Patterns

{% for category, traits in imported_traits.items() %}
{% if traits and category not in ['custom_coordination', 'custom_tools'] %}
### {{ category.replace('_', ' ')|title }}

{% for trait_name, trait_data in traits.items() %}
#### {{ trait_data.name }}

{{ trait_data.content }}

{% endfor %}
{% endif %}
{% endfor %}

{% if imported_traits.custom_coordination %}
### Custom Coordination Patterns

{% for pattern_name, pattern_content in imported_traits.custom_coordination.items() %}
**{{ pattern_name|replace('_', ' ')|title }}**: {{ pattern_content }}

{% endfor %}
{% endif %}

{% if imported_traits.custom_tools %}
### Custom Tool Configurations

{% for tool in imported_traits.custom_tools %}
#### {{ tool.tool }}
{{ tool.description }}

{% if tool.config_file %}
**Configuration**: `{{ tool.config_file }}`
{% endif %}

{% if tool.recommended_settings %}
**Settings**:
{% for setting, value in tool.recommended_settings.items() %}
- {{ setting }}: {{ value }}
{% endfor %}
{% endif %}

{% if tool.integration_notes %}
**Integration**: {{ tool.integration_notes }}
{% endif %}

{% endfor %}
{% endif %}
{% endif %}

{% if agent.coordination_overrides %}
---

## Coordination Overrides

{% for override_name, override_value in agent.coordination_overrides.items() %}
**{{ override_name|replace('_', ' ')|title }}**: {{ override_value }}

{% endfor %}
{% endif %}

---

*Generated by Claude Config Generator v{{ version or '0.1.0' }}*
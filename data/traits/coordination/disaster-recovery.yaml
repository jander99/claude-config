name: disaster-recovery
display_name: "Disaster Recovery"
category: coordination
description: "Backup, recovery, and business continuity planning across systems"

coordination_patterns:
  - name: "backup_strategy_implementation"
    trigger: "when setting up production systems or data storage"
    action: "coordinate with database-engineer and devops-engineer for backup implementation"
    context_required: ["data_criticality", "recovery_objectives", "backup_retention"]

  - name: "disaster_recovery_testing"
    trigger: "regularly or before major system changes"
    action: "coordinate disaster recovery testing and procedure validation"
    context_required: ["recovery_scenarios", "testing_schedule", "success_criteria"]

implementation: |
  ## Disaster Recovery Coordination

  **Hope for the best, plan for the worst - disaster recovery is not optional**

  ### Disaster Recovery Planning
  1. **Business Impact Analysis**:
     - **Critical Systems**: Identify systems essential for business operations
     - **Recovery Time Objective (RTO)**: Maximum acceptable downtime
     - **Recovery Point Objective (RPO)**: Maximum acceptable data loss
     - **Business Criticality**: Prioritize systems by business impact

  2. **Risk Assessment**:
     - **Natural Disasters**: Earthquakes, floods, fires, power outages
     - **Technical Failures**: Hardware failures, software bugs, network outages
     - **Security Incidents**: Ransomware, data breaches, insider threats
     - **Human Errors**: Accidental deletions, configuration mistakes

  ### Backup Strategy Coordination
  ```
  Backup Implementation Pipeline:
  database-engineer → Database backup configuration
  ↓
  devops-engineer → Infrastructure and application backups
  ↓
  security-engineer → Backup encryption and access controls
  ↓
  qa-engineer → Backup integrity testing and recovery validation
  ```

  ### The 3-2-1 Backup Rule
  - **3 Copies**: Keep at least 3 copies of important data
  - **2 Different Media**: Store copies on 2 different storage media
  - **1 Offsite**: Keep 1 copy in a different physical location

  ### Recovery Strategies
  1. **High Availability**:
     - **Load Balancing**: Distribute traffic across multiple instances
     - **Redundancy**: Eliminate single points of failure
     - **Auto-Failover**: Automatic switching to backup systems
     - **Geographic Distribution**: Multiple data centers or regions

  2. **Backup and Restore**:
     - **Full Backups**: Complete system and data backups
     - **Incremental Backups**: Changes since last backup
     - **Point-in-Time Recovery**: Restore to specific timestamps
     - **Cross-Region Replication**: Backup to different geographic regions

  ### Testing and Validation
  - **Regular Testing**: Monthly or quarterly recovery drills
  - **Automated Testing**: Continuous backup integrity verification
  - **Scenario Planning**: Test various disaster scenarios
  - **Documentation Updates**: Keep recovery procedures current

  ### Recovery Procedures
  1. **Incident Detection**: Monitoring and alerting for system failures
  2. **Assessment**: Evaluate scope and impact of the incident
  3. **Communication**: Notify stakeholders and coordinate response
  4. **Recovery Execution**: Follow documented recovery procedures
  5. **Validation**: Verify system functionality and data integrity
  6. **Post-Incident Review**: Document lessons learned and improvements

  ### Business Continuity Planning
  - **Communication Plan**: Contact information and escalation procedures
  - **Alternative Work Arrangements**: Remote work capabilities and processes
  - **Vendor Relationships**: Emergency support and service agreements
  - **Insurance Coverage**: Appropriate coverage for various disaster scenarios

  ### Data Protection Compliance
  - **Regulatory Requirements**: GDPR, HIPAA, SOX data protection requirements
  - **Encryption**: Data encryption at rest and in transit
  - **Access Controls**: Secure access to backup and recovery systems
  - **Audit Trails**: Comprehensive logging of backup and recovery activities

  ### Cloud-Native Disaster Recovery
  - **Multi-Zone Deployment**: Distribute resources across availability zones
  - **Cross-Region Replication**: Replicate critical data across regions
  - **Infrastructure as Code**: Rapidly recreate infrastructure from templates
  - **Managed Services**: Leverage cloud provider backup and recovery services

  ### Coordination Examples
  - "Disaster recovery plan implemented - RTO 4 hours, RPO 15 minutes"
  - "database-engineer: Automated backups configured with cross-region replication"
  - "Recovery drill completed successfully - all systems restored within SLA"
  - "Business continuity validated - 99.9% availability target maintained"
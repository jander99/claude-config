name: retry-escalation
category: coordination
version: 1.0.0
description: Standardized retry logic and escalation protocol for development agents

implementation: |
  ## Retry and Escalation Protocol

  ### Testing Coordination with Retry Logic

  **After completing development work:**

  1. **Testing Handoff**: Coordinate with qa-engineer for validation
  2. **Retry Management**: Apply systematic retry logic for failures
  3. **Escalation Protocol**: Escalate to sr-architect after 3 failed attempts

  ### Retry Logic Implementation

  **If tests fail:**
  - **Attempt 1**: Focus on primary patterns and common issues
  - **Attempt 2**: Review integration points and dependencies  
  - **Attempt 3**: Deep analysis of error patterns and edge cases
  - **After 3 failures**: Escalate with detailed context

  ### Escalation Context

  **When escalating to sr-architect:**
  - **Original Task**: What was the user trying to accomplish?
  - **Attempts Made**: What approaches were tried and why did they fail?
  - **Current State**: What is the system state and constraints?
  - **Specific Questions**: What decisions or guidance is needed?

  ### Development Workflow Integration

  ```
  Development Complete → qa-engineer Testing → Retry Logic → sr-architect Escalation
  ```

  **Parse test results**: Expect structured feedback on technology-specific failures
  **Integration verification**: Ensure proper integration with other agent components when needed

coordination_patterns:
  - name: testing_retry_cycle
    trigger: after qa-engineer test failures
    action: apply retry logic focusing on technology-specific patterns
    context_required:
      - test_failure_details
      - previous_attempt_count
      - technology_stack

  - name: escalation_to_senior
    trigger: after 3 failed testing attempts
    action: escalate to sr-architect with comprehensive context
    context_required:
      - original_task_description
      - all_attempts_summary
      - current_system_state
      - specific_guidance_needed

  - name: integration_verification
    trigger: when coordinating with multiple agents
    action: verify proper integration between agent components
    context_required:
      - coordinating_agents
      - integration_points
      - shared_dependencies
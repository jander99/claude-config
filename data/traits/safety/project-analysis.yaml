name: project-analysis
category: safety
version: 1.0.0
description: Systematic project structure analysis before development work

implementation: |
  ## Project Structure Analysis Protocol

  ### Pre-Development Analysis

  **CRITICAL: Always analyze project context before starting work:**

  #### 1. Technology Stack Verification
  - **Project Type Confirmation**: Verify this matches agent specialization
  - **Framework Detection**: Identify primary frameworks and libraries in use
  - **Dependency Analysis**: Review package managers and dependency files
  - **Version Compatibility**: Check language and framework version requirements

  #### 2. Existing Code Pattern Analysis
  - **Architecture Review**: Understand existing project structure and organization
  - **Coding Standards**: Identify naming conventions, formatting, and style patterns
  - **Design Patterns**: Note architectural patterns and established conventions
  - **Integration Points**: Identify external services, APIs, and system boundaries

  #### 3. Development Environment Assessment
  - **Build System**: Identify build tools, scripts, and automation
  - **Testing Strategy**: Review existing test frameworks and testing patterns
  - **Development Tools**: Check linting, formatting, and quality tools
  - **Environment Setup**: Note containerization, virtual environments, or special setup

  #### 4. Documentation and Configuration
  - **Project Documentation**: Review README, architecture docs, and setup guides
  - **Configuration Management**: Understand environment variables and config patterns
  - **Deployment Patterns**: Note containerization, CI/CD, and deployment setup
  - **Security Considerations**: Identify authentication, authorization, and security patterns

  ### Analysis Checklist Template

  **Before Writing Code:**
  - ✅ Check available MCPs for latest framework documentation and best practices
  - ✅ Analyze existing project structure, dependencies, and coding patterns  
  - ✅ Identify testing strategy and existing test patterns
  - ✅ Review configuration and environment setup requirements
  - ✅ Note integration points and external dependencies
  - ✅ Understand deployment and production patterns

  ### Context Enhancement Integration

  **Note**: The prompt-engineer may have already enhanced the request with additional context such as:
  - Specific file paths and error details
  - Framework requirements and constraints  
  - Integration requirements and dependencies
  - Performance and security considerations

  ### Integration with Other Safety Checks

  This analysis works in conjunction with:
  - **Branch Safety**: Ensuring appropriate branch for development work
  - **Technology Boundaries**: Coordinating with appropriate specialized agents
  - **Testing Coordination**: Understanding existing test patterns for qa-engineer handoff

  ### Risk Assessment

  **Flag potential issues:**
  - **Dependency Conflicts**: Version mismatches or incompatible libraries
  - **Architecture Misalignment**: Proposed changes that conflict with existing patterns
  - **Testing Gaps**: Areas where existing test coverage may be insufficient
  - **Security Concerns**: Changes that may impact authentication or data security
  - **Performance Impact**: Modifications that may affect system performance

coordination_patterns:
  - name: technology_stack_verification
    trigger: before starting any development work
    action: verify project type matches agent specialization
    context_required:
      - project_files
      - dependency_configurations
      - framework_indicators

  - name: code_pattern_analysis
    trigger: when modifying existing codebase
    action: analyze existing patterns and conventions
    context_required:
      - existing_code_structure
      - naming_conventions
      - architectural_patterns

  - name: testing_strategy_identification
    trigger: before development work
    action: identify existing test frameworks and patterns for qa-engineer coordination
    context_required:
      - test_files
      - testing_frameworks
      - coverage_requirements

  - name: integration_boundary_assessment
    trigger: when working with complex systems
    action: identify integration points and potential coordination needs
    context_required:
      - external_services
      - api_interfaces
      - system_boundaries